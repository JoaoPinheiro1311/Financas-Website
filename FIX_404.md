# ðŸ”§ FIX: SoluÃ§Ã£o para erro 404 no Vercel

## O que foi corrigido

### Problema original
Erro 404 ao fazer deploy - Vercel nÃ£o conseguia encontrar os endpoints

### Causas
1. `vercel.json` com configuraÃ§Ã£o de rotas incorreta
2. API nÃ£o estava corretamente configurada para serverless

### SoluÃ§Ãµes implementadas

#### 1. **Novo `vercel.json`** (simplificado)
- âœ… ConfiguraÃ§Ã£o mais simples e direta
- âœ… Uma Ãºnica funÃ§Ã£o Python (`api/index.py`)
- âœ… Todas as rotas reescrevem para `/api`

#### 2. **Novo ficheiro `api/[route].py`**
- Captura todas as rotas dinÃ¢micas
- Processa requisiÃ§Ãµes WSGI corretamente
- Suporta todos os mÃ©todos HTTP

#### 3. **`.vercelignore`**
- Evita upload de ficheiros desnecessÃ¡rios
- Mais rÃ¡pido deploy

#### 4. **Melhorado `api/index.py`**
- Definir `VERCEL=1` automaticamente
- ExportaÃ§Ã£o WSGI correcta

## Como fazer deploy agora

### 1. Teste local primeiro
```bash
npm run build
npm run preview
```

### 2. Push para Git
```bash
git add .
git commit -m "Fix: Vercel deployment configuration"
git push origin main
```

### 3. Vercel farÃ¡ deploy automÃ¡tico

## Se ainda receber 404

### VerificaÃ§Ãµes:
1. **Logs do Vercel**: Dashboard > Functions > Ver logs
2. **Variables**: Certifique-se que `SUPABASE_URL` e `SUPABASE_SERVICE_KEY` estÃ£o no Vercel
3. **Health check**: Visite `https://seu-app.vercel.app/api/health`

### Debug:
```bash
# Teste local a rota
curl http://localhost:5000/api/health

# Com VERCEL env
VERCEL=1 python app.py
```

## Estrutura final

```
api/
â”œâ”€â”€ index.py         â† Main handler (entrada principal)
â”œâ”€â”€ [route].py       â† Dynamic route handler (todas as rotas)
â”œâ”€â”€ __init__.py
â”œâ”€â”€ wsgi.py          â† WSGI wrapper
â”œâ”€â”€ requirements.txt â† DependÃªncias Python
â””â”€â”€ runtime.txt      â† Python version

.vercelignore        â† Files to ignore
vercel.json          â† Vercel configuration (CORRIGIDO)
```

## PrÃ³ximas verificaÃ§Ãµes

- [ ] VariÃ¡veis de ambiente no Vercel (Settings > Environment Variables)
- [ ] Google OAuth redirect URIs atualizadas
- [ ] CORS headers configurados
- [ ] Teste da API em produÃ§Ã£o

---

**Status**: âœ… Pronto para novo deploy
